var cmdMenu=function(){var e=null,t=null,n=null,o=null,r=null,l=null,c=function(){t=document.querySelector(e),t.addEventListener("keydown",d,!1)},a=function(){var e=document.getElementById("main-nav"),t=document.createElement("p");t.className="results",t.innerHTML="",e.appendChild(t)},i=function(){o=document.getElementsByTagName(n)},u=function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===e.readyState&&200===e.status){var t=JSON.parse(e.responseText);if(localStorage.length<=1||t.ip!=localStorage.getItem("ip")){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){var e=JSON.parse(n.responseText);for(var t in countryCode)countryCode.hasOwnProperty(t)?(t=e.country,localStorage.setItem("country",countryCode[t])):localStorage.setItem("country",e.country);localStorage.setItem("ip",e.ip),localStorage.setItem("hostname",e.hostname),localStorage.setItem("city",e.city),localStorage.setItem("region",e.region),localStorage.setItem("loc",e.loc),localStorage.setItem("org",e.org)}},n.open("GET","http://ipinfo.io/json",!0),n.send(null)}}},e.open("GET","https://api.ipify.org?format=json",!0),e.send(null)},s=function(){function t(t){if(n+=t,null!=localStorage.getItem("cmds")){var o=JSON.parse(localStorage.getItem("cmds")).reverse();document.querySelector(e).value=o[n],0>n?(n=-1,document.querySelector(e).value=""):n>=JSON.parse(localStorage.getItem("cmds")).length&&(n=o.length,document.querySelector(e).value=o[o.length-1])}}var n=-1;return{prevCmd:function(){t(1)},nextCmd:function(){t(-1)},val:function(){return n}}}(),m=function(){r=[],sitemap=new XMLHttpRequest,sitemap.open("GET","/cmd-menu/sitemap.xml",!0),sitemap.onreadystatechange=function(){if(4===sitemap.readyState&&200===sitemap.status){document.querySelector(".results").innerHTML="";for(var e=sitemap.responseXML.getElementsByTagName("loc"),t=0;t<e.length;t++){var n=e[t].childNodes[0].nodeValue,o=n.split("/").filter(function(e){return 0===e||e}).slice(2).join("/").toString();r.push(o)}}else document.querySelector(".results").innerHTML="No sitemap file found"},sitemap.send()},d=function(n){var c=JSON.parse(localStorage.getItem("cmds"))||[],i=t.value.trim().toLowerCase();switch(n.keyCode){case 13:if(i.length>0){"function"==typeof l[i.split(" ")[0]]?l[i.split(" ")[0]](i.split(" ").slice(1),o,r):(a(),document.querySelector(".results").innerHTML=""+i+": command not found");try{c.push(i),localStorage.setItem("cmds",JSON.stringify(c)),e.value=i}catch(n){localStorage.clear(),c.push(i),localStorage.setItem("cmds",JSON.stringify(c)),e.value=i}}else a(),document.querySelector(".results").innerHTML="empty value";break;case 38:s.prevCmd();break;case 40:s.nextCmd()}};return{init:function(t,o){e=t,n=o,a(),m(),c(),i(),u()},cmds:function(e){l=e},country:function(e){countryCode=e}}}();cmdMenu.cmds({ls:function(e,t,n){if(e.length){if(e.length>0)if("-e"===e[0]||"--external"===e[0]){document.querySelector(".results").innerHTML="";for(var o=0;o<n.length;o++)for(var o=0;o<n.length;o++){var r=document.createElement("a"),l=n[o],t=l.split("/").filter(function(e){return""!==e}).slice(-1).toString(),c=t.replace(/-|_|\+|%20/gi," ").replace(/(.*)\.(.*?)$/,"$1");r.href=window.location.protocol+"//"+window.location.hostname+"/"+l,""===t?r.innerHTML="Home":r.innerHTML=c,document.querySelector(".results").appendChild(r)}}else"-h"===e[0]||"--help"===e[0]?document.querySelector(".results").innerHTML="list all available locations to navigate to<br />Usage:<br />ls [option] [target]<br />Options:<br />[] // prints available locations on current page<br />[-e] or [--external] // prints available pages on the website<br />[-h] [--help] // prints help manual":document.querySelector(".results").innerHTML="ls "+e.join(" ")+": command not found"}else if(t.length){document.querySelector(".results").innerHTML="";for(var o=0;o<t.length;o++){var r=document.createElement("a");r.href="#"+t[o].id,t[o].getElementsByTagName("h1, h2, h3, h4, h5, h6").length?r.innerHTML=t[o].getElementsByTagName("h1, h2, h3, h4, h5, h6")[0].innerText:r.innerHTML=t[o].id.replace("-"," "),document.querySelector(".results").appendChild(r)}}else document.querySelector(".results").innerHTML="No elements to navigate on this page. Try with '-h' flag for more options."},cd:function(e,t,n){e.length?".."===e[0]||"-"===e[0]?(window.history.go(-1),document.getElementById("close-menu").click()):"/"===e[0]||"~"===e[0]?window.location.href=window.location.protocol+"//"+window.location.hostname:e[0]===n[n.indexOf(e[0])]?window.location.href=window.location.protocol+"//"+window.location.hostname+"/"+e[0]:t[e[0]]&&e[0]===t[e[0]].id?(document.querySelector(".results").innerHTML="",window.location.href="#"+e[0],document.getElementById("close-menu").click()):document.querySelector(".results").innerHTML="cd "+e.join(" ")+": No such file or directory":document.querySelector(".results").innerHTML="Missing argument for navigation."},who:function(e){e.length?document.querySelector(".results").innerHTML=""+("who "+e.join(" ")+": command not found"):document.querySelector(".results").innerHTML="Username: guest<br />Location: "+localStorage.getItem("city")+", "+localStorage.getItem("region")+"<br />Country: "+localStorage.getItem("country")+"<br />Coordinates: "+localStorage.getItem("loc")},hostname:function(e){e.length?document.querySelector(".results").innerHTML="hostname "+e.join(" ")+": command not found":document.querySelector(".results").innerHTML=""+localStorage.getItem("hostname")},ifconfig:function(e){e.length?document.querySelector(".results").innerHTML="ifconfig "+e.join(" ")+": command not found":document.querySelector(".results").innerHTML="IP: "+localStorage.getItem("ip")+"<br />Network: "+localStorage.getItem("org")},help:function(e){e.length?document.querySelector(".results").innerHTML="help "+e.join(" ")+": command not found":document.querySelector(".results").innerHTML="type 'ls' or 'cd' for available options"},hello:function(e){e.length?document.querySelector(".results").innerHTML="Hello "+e.join(" ")+": command not found":document.querySelector(".results").innerHTML="Hello , world!"},exit:function(e){if(e.length)document.querySelector(".results").innerHTML="exit "+e.join(" ")+": command not found";else{document.querySelector(".results").innerHTML="Good bye!";try{setTimeout(function(){window.open("https://www.google.com","_self")},1e3)}catch(t){setTimeout(function(){window.close()},1e3)}}}});