var cmdMenu=function(){var e=null,t=null,n=null,o=null,r=null,l=null,a=function(){t=document.querySelector(e),t.addEventListener("keydown",p,!1)},c=function(){var e=document.getElementById("main-nav"),t=document.createElement("p");t.className="results",t.innerHTML="",e.appendChild(t)},s=function(){o=document.getElementsByTagName(n)},u=localStorage.getItem("update");u||localStorage.setItem("update",(new Date).toUTCString());var d=function(){var e=new XMLHttpRequest;e.open("HEAD",l,!0),e.send(null),e.onreadystatechange=function(){if(4===e.readyState&&200===e.status){var t=localStorage.getItem("pages"),n=e.getResponseHeader("Last-Modified");(n>u||null===t)&&m()}}},m=function(){index=new XMLHttpRequest,index.open("GET",l,!0),index.send(null),index.onreadystatechange=function(){if(4===index.readyState&&200===index.status)for(obj=JSON.parse(index.responseText),q=[],i=0,j=obj.length;i<j;i++)q.push(obj[i]),localStorage.setItem("pages",JSON.stringify(q)),localStorage.setItem("update",(new Date).toUTCString())}},h=function(){if(!sessionStorage.getItem("session")){var e=new XMLHttpRequest;sessionStorage.setItem("session",(new Date).toUTCString()),e.open("GET","http://ipinfo.io/json",!0),e.send(),e.onreadystatechange=function(){if(4===e.readyState&&200===e.status){var t=JSON.parse(e.responseText);if("object"==typeof countryCode)for(var n in countryCode)countryCode.hasOwnProperty(n)?(n=t.country,localStorage.setItem("country",countryCode[n])):localStorage.setItem("country",t.country);else localStorage.setItem("country",t.country);localStorage.setItem("ip",t.ip),localStorage.setItem("hostname",t.hostname),localStorage.setItem("city",t.city),localStorage.setItem("region",t.region),localStorage.setItem("loc",t.loc),localStorage.setItem("org",t.org)}}}},g=function(){function t(t){if(n+=t,null!=localStorage.getItem("cmds")){var o=JSON.parse(localStorage.getItem("cmds")).reverse();document.querySelector(e).value=o[n],0>n?(n=-1,document.querySelector(e).value=""):n>=JSON.parse(localStorage.getItem("cmds")).length&&(n=o.length,document.querySelector(e).value=o[o.length-1])}}var n=-1;return{prevCmd:function(){t(1)},nextCmd:function(){t(-1)},val:function(){return n}}}(),p=function(n){var l=JSON.parse(localStorage.getItem("cmds"))||[],a=t.value.trim();switch(n.keyCode){case 13:if(a.length>0){"function"==typeof r[a.split(" ")[0]]?r[a.split(" ")[0]](a.split(" ").slice(1),o,JSON.parse(localStorage.getItem("pages"))):(c(),document.querySelector(".results").innerHTML=""+a+": command not found");try{l.push(a),localStorage.setItem("cmds",JSON.stringify(l)),e.value=a}catch(n){localStorage.clear(),l.push(a),localStorage.setItem("cmds",JSON.stringify(l)),e.value=a}}else c(),document.querySelector(".results").innerHTML="empty value";break;case 38:g.prevCmd();break;case 40:g.nextCmd()}},f=function(){var e=window.location.search.replace("?q=",""),t=decodeURIComponent(e).split("_").join(" "),o=document.querySelectorAll(n),r=new RegExp(t,"gi"),l='<span class="highlight">'+t+"</span>";if(e.length)for(var a=0,c=o.length;c>a;a++)o[a].innerHTML=o[a].innerHTML.replace(r,l)};return{init:function(t,o,r){e=t,n=o,l=r||"/pages.json",c(),a(),s(),d(),f(),h()},cmds:function(e){r=e},country:function(e){countryCode=e}}}();cmdMenu.cmds({ls:function(e,t,n){if(e.length)switch(e[0]){case"-e":case"--external":document.querySelector(".results").innerHTML="";for(var o=0,r=n.length;r>o;o++){var l=document.createElement("a");l.href=window.location.protocol+"//"+window.location.hostname+n[o].url,"/"===n[o].url||"/home"===n[o].url||n[o].url===window.location.hostname?l.innerHTML="Homepage":l.innerHTML=n[o].title,document.querySelector(".results").appendChild(l)}break;case"-a":case"--all":document.querySelector(".results").innerHTML='<h3 class="label">Current page:</h3>';for(var o=0;o<t.length;o++){var l=document.createElement("a");l.href="#"+t[o].id,t[o].querySelectorAll("h1, h2, h3, h4, h5, h6").length?l.innerHTML=t[o].querySelectorAll("h1, h2, h3, h4, h5, h6")[0].innerText:l.innerHTML=t[o].id.replace("-"," "),document.querySelector(".results").appendChild(l)}document.querySelector(".results").innerHTML+='<h3 class="label">Entire website:</h3>';for(var o=0,r=n.length;r>o;o++){var l=document.createElement("a");l.href=window.location.protocol+"//"+window.location.hostname+n[o].url,"/"===n[o].url||"/home"===n[o].url||n[o].url===window.location.hostname?l.innerHTML="Homepage":l.innerHTML=n[o].title,document.querySelector(".results").appendChild(l)}break;case"-h":case"--help":document.querySelector(".results").innerHTML="list all available locations to navigate to<br />Usage:<br />ls [option] [target]<br />Options:<br />[] // prints available locations on current page<br />[-e] or [--external] // prints available pages on the website<br />[-h], [--help] // prints help manual";break;default:document.querySelector(".results").innerHTML="ls "+e.join(" ")+": command not found"}else if(t.length){document.querySelector(".results").innerHTML="";for(var o=0;o<t.length;o++){var l=document.createElement("a");l.href="#"+t[o].id,t[o].querySelectorAll("h1, h2, h3, h4, h5, h6").length?l.innerHTML=t[o].querySelectorAll("h1, h2, h3, h4, h5, h6")[0].innerText:l.innerHTML=t[o].id.replace("-"," "),document.querySelector(".results").appendChild(l)}}else document.querySelector(".results").innerHTML="No elements to navigate on this page. Try with '-h' flag for more options."},cd:function(e,t,n){if(e.length){for(var o=[],r=[],l=0,a=n.length;a>l;l++)o.push(n[l].url);for(var c=0,i=t.length;i>c;c++)r.push(t[c].id);switch(e[0]){case"..":case"-":window.history.go(-1);break;case"/":case"~":window.location.href=window.location.protocol+"//"+window.location.hostname;break;case o[o.indexOf(e[0])]:window.location.href=window.location.protocol+"//"+window.location.hostname+e[0];break;case r[r.indexOf(e[0])]:window.location.href="#"+e[0],document.getElementById("close-menu").click(),document.querySelector(".results").innerHTML="";break;case"-h":case"--help":document.querySelector(".results").innerHTML="Navigate on current website<br />Usage:<br />cd [target]<br />Options:<br />[] // prints available locations on current page<br />[-e] or [--external] // prints available pages on the website<br />[-h], [--help] // prints help manual";break;default:document.querySelector(".results").innerHTML="cd "+e.join(" ")+": No such file or directory"}}else document.querySelector(".results").innerHTML="Missing argument for navigation."},who:function(e){e.length?document.querySelector(".results").innerHTML=""+("who "+e.join(" ")+": command not found"):document.querySelector(".results").innerHTML="Username: guest<br />Location: "+localStorage.getItem("city")+", "+localStorage.getItem("region")+"<br />Country: "+localStorage.getItem("country")+"<br />Coordinates: "+localStorage.getItem("loc")},hostname:function(e){e.length?document.querySelector(".results").innerHTML="hostname "+e.join(" ")+": command not found":document.querySelector(".results").innerHTML=""+localStorage.getItem("hostname")},ifconfig:function(e){e.length?document.querySelector(".results").innerHTML="ifconfig "+e.join(" ")+": command not found":document.querySelector(".results").innerHTML="IP: "+localStorage.getItem("ip")+"<br />Network: "+localStorage.getItem("org")},help:function(e){e.length?document.querySelector(".results").innerHTML="help "+e.join(" ")+": command not found":document.querySelector(".results").innerHTML="type 'ls' or 'cd' for available options"},hello:function(e){e.length?document.querySelector(".results").innerHTML="Hello "+e.join(" ")+": command not found":document.querySelector(".results").innerHTML="Hello , world!"},exit:function(e){if(e.length)document.querySelector(".results").innerHTML="exit "+e.join(" ")+": command not found";else{document.querySelector(".results").innerHTML="Good bye!";try{setTimeout(function(){window.open("https://www.google.com","_self")},1e3)}catch(t){setTimeout(function(){window.close()},1e3)}}},find:function(e,t,n){if(e.length){if("."===e[0]){var o=e.slice(1).join(" "),r=document.body.innerText||document.body.textContent;-1===r.indexOf(o)?document.querySelector(".results").innerHTML='No results matching "'+e.slice(1).join(" ")+'"':window.location.href=window.location.pathname+"?q="+o.split(" ").join("_")}else if("/"===e[0]){document.querySelector(".results").innerHTML="";var o=e.slice(1).join(" ").toLowerCase();ids=[];for(var l=0,a=n.length;a>l;l++){obj=n[l];for(var c in obj)if(obj.hasOwnProperty(c)){if(obj[c].toLowerCase().indexOf(o)>=0){ids.push(parseInt(obj.id));break}document.querySelector(".results").innerHTML='No results matching "'+e.slice(1).join(" ")+'"'}}for(var i=0,s=ids.length;s>i;i++){document.querySelector(".results").innerHTML="";var u=ids[i],d=document.createElement("a");d.innerHTML=n[u-1].title,d.href=n[u-1].url+"?q="+o.split(" ").join("_"),document.querySelector(".results").appendChild(d)}}}else document.querySelector(".results").innerHTML="Error: location or search argument is missing"}});